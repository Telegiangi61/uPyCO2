!function(g){var n={radius:80,paddingX:40,paddingY:40,gaugeWidth:30,fill:"0-#1cb42f:0-#fdbe37:50-#fa4133:100",gaugeBackground:"#f4f4f4",background:"#fff",showNeedle:!0,animationSpeed:500,width:0,height:0,centerX:0,centerY:0,min:0,max:1e3,value:80,valueLabel:{display:!0,fontFamily:"Arial",fontColor:"#000",fontSize:"15",fontWeight:"normal"},title:{display:!0,value:"",fontFamily:"Arial",fontColor:"#000",fontSize:"20",fontWeight:"normal"},label:{display:!0,left:"Low",right:"High",fontFamily:"Arial",fontColor:"#000",fontSize:"15",fontWeight:"normal"}};function o(e,t,i){var a=this;a.element=e,a.$element=g(e),a.config=g.extend({},n,t),a._config=n,a.method=i,a.gauge={},a.init()}Raphael.fn.arc=function(e,t,i,a,g,n,o){var l=[g,n,o,0,1,i,a].join(" ");return this.path("M"+e+" "+t+" a "+l)},Raphael.fn.circularArc=function(e,t,i,a,g){var n=e+i*Math.cos(a*Math.PI/180),o=t+i*Math.sin(a*Math.PI/180),l=e+i*Math.cos(g*Math.PI/180),c=t+i*Math.sin(g*Math.PI/180);return this.arc(n,o,l-n,c-o,i,i,0)},o.prototype={init:function(){_this=this,_this.method||_this.draw()},_setup:function(){_this=this,_this.config.width=2*_this.config.radius+2*_this.config.paddingX,_this.config.height=_this.config.radius+2*_this.config.paddingY,_this.config.centerX=_this.config.paddingX+_this.config.radius,_this.config.centerY=_this.config.paddingY+_this.config.radius,void 0!==g(this).attr("id")&&""!==g(this).attr("id")||(_this.config.id="gauge-"+g('*[id^="gauge-"]').length,_this.$element.attr("id",_this.config.id))},_calculateRotation:function(e,t,i){var a=i<t&&e<i?(i-e)/(t-e)*180:i<=e?0:180;return a},draw:function(){var e=this;e._setup(),e.gauge=new Raphael(e.config.id,e.config.width,e.config.height),e.gauge.gauge=e.gauge.circularArc(e.config.centerX,e.config.centerY,e.config.radius,180,0),e.gauge.gauge.attr({fill:e.config.fill,stroke:"none"}),e.gauge.gauge.node.setAttribute("class","gauge"),e.gauge.gaugeBackground=e.gauge.circularArc(e.config.centerX,e.config.centerY,e.config.radius,180,0),e.gauge.gaugeBackground.attr({fill:e.config.gaugeBackground,stroke:"none"}),e.gauge.gaugeBackground.node.setAttribute("class","gauge__background"),e.gauge.centerArc=e.gauge.circularArc(e.config.centerX,e.config.centerY,e.config.radius-e.config.gaugeWidth,180,0),e.gauge.centerArc.attr({fill:e.config.background,stroke:"none"}),e.gauge.centerArc.node.setAttribute("class","gauge__center"),e.config.showNeedle&&(e.gauge.needle=e.gauge.rect(e.config.centerX,e.config.paddingY,1,40),e.gauge.needle.attr({fill:"#000",stroke:"none"}),e.gauge.needle.node.setAttribute("class","gauge__needle")),e.gauge.bottomMask=e.gauge.rect(0,e.config.centerY,e.config.width,40),e.gauge.bottomMask.attr({fill:e.config.background,stroke:"none"}),e.config.valueLabel.display&&(e.config.showNeedle?e.gauge.valueLabel=e.gauge.text(e.config.centerX,e.config.centerY-10,Math.round((e.config.max-e.config.min)/2)):e.gauge.valueLabel=e.gauge.text(e.config.centerX,e.config.centerY-10,e.config.value),e.gauge.valueLabel.attr({fill:e.config.valueLabel.fontColor,"font-size":e.config.valueLabel.fontSize,"font-family":e.config.valueLabel.fontColor,"font-weight":e.config.valueLabel.fontWeight}),e.gauge.valueLabel.node.setAttribute("class","gauge__value")),e.config.title.display&&(e.gauge.title=e.gauge.text(e.config.centerX,e.config.paddingY-5,e.config.title.value),e.gauge.title.attr({fill:e.config.title.fontColor,"fill-opacity":0,"font-size":e.config.title.fontSize,"font-family":e.config.title.fontFamily,"font-weight":e.config.title.fontWeight}),e.gauge.title.node.setAttribute("class","gauge__title")),e.config.label.display&&(e.gauge.leftLabel=e.gauge.text(e.config.gaugeWidth/2+e.config.paddingX,e.config.centerY+10,e.config.label.left),e.gauge.leftLabel.attr({fill:e.config.title.fontColor,"fill-opacity":0,"font-size":e.config.label.fontSize,"font-family":e.config.label.fontFamily,"font-weight":e.config.label.fontWeight}),e.gauge.leftLabel.node.setAttribute("class","gauge__label--left"),e.gauge.rightLabel=e.gauge.text(e.config.width-e.config.gaugeWidth/2-e.config.paddingX,e.config.centerY+10,e.config.label.right),e.gauge.rightLabel.attr({fill:e.config.title.fontColor,"fill-opacity":0,"font-size":e.config.label.fontSize,"font-family":e.config.label.fontFamily,"font-weight":e.config.label.fontWeight}),e.gauge.rightLabel.node.setAttribute("class","gauge__label--right")),setTimeout(function(){e.config.valueLabel.display&&e.gauge.valueLabel.attr("y",e.config.centerY-10),e.config.title.display&&e.gauge.title.attr({y:e.config.paddingY-e.gauge.title.getBBox().height/2,"fill-opacity":1}),e.config.label.display&&(e.gauge.leftLabel.attr({y:e.config.centerY+e.gauge.leftLabel.getBBox().height/2,"fill-opacity":1}),e.gauge.rightLabel.attr({y:e.config.centerY+e.gauge.rightLabel.getBBox().height/2,"fill-opacity":1}))},1e3),e.gauge.gaugeBackground.animate({transform:"r"+e._calculateRotation(e.config.min,e.config.max,e.config.value)+","+e.config.centerX+","+e.config.centerY},e.config.animationSpeed,"<>")},update:function(e){function t(e,t,i){a.config.min=e,a.config.max=t,a.config.value=i,a.gauge.gaugeBackground.animate({transform:"r"+a._calculateRotation(e,t,i)+","+a.config.centerX+","+a.config.centerY},a.config.animationSpeed,"<>"),a.config.valueLabel.display&&(a.config.showNeedle?a.gauge.valueLabel.attr("text",i):a.gauge.valueLabel.attr("text",(t-e)/2))}var a=this;void 0!==e.min&&void 0!==e.max&&void 0!==e.value?t(e.min,e.max,e.value):void 0!==e.value&&t(a.config.min,a.config.max,e.value)}},g.fn.kumaGauge=function(e,t){var i=e,a=arguments;return"string"==typeof i?this.each(function(){"function"==typeof g.data(this,"kumaGauge")[e]&&g.data(this,"kumaGauge")[e](t)}):1===a.length?(t=i,e=!1,this.each(function(){g.data(this,"kumaGauge")||g.data(this,"kumaGauge",new o(this,t,e))})):void 0}}(jQuery,(window,document));